<!doctype html>
<html>
  <head>
    <style>
      div.box {
        margin: 75px 0;
        position: relative;
      }
      div.plot {
        margin: 0 auto;
        text-align: left;
      }
      .caption, .xlabel, .ylabel {
        text-align: center;
        font-family: Georgia, serif;
      }
      .caption {
        font-size: 14px;
      }
      .xlabel, .ylabel {
        position: absolute;
        color: #666;
        font-size: 12px;
      }
      .xlabel {
        top: 325px;
        left: 500px;
      }
      .ylabel {
        top: 150px;
        left: 50px;
      }
    </style>

    <script type='text/javascript' src='caterwaul.all.js'></script>
    <script type='text/javascript' src='montenegro.client.js'></script>
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
    <script type='text/javascript' src='jquery.flot.min.js'></script>
    <script type='text/javascript' src='json/comparison.js'></script>
    <script>
      // When importing comparison.js, we get the following variables
      //   binomial, normal, sn, ns, ps
      //
      // Our data will be properties on binomial, normal, and sn with names n#{n}p#{p}

      // Plot the graphs
      $(caterwaul.clone('std seq montenegro')(function () {
        var indexes = fn[s1, s2, s3][seq[~s1 *[[Math.max(_, s2[_i], s3[_i]) /se[console.log(_)] > 0.01, _i]] %[_[0] > 0.001] *[_[1]]]];

        for (var i = 0; i < ns.length; ++i) {
          var n = ns[i];
          for (var j = 0; j < ps.length; ++j) {
            var k = 'n#{n}p#{p}';
            var p = String(ps[j]).replace('.', '');
            var is = indexes(binomial[k], normal[k], sn[k]);
            var series = [
              {
                data: seq[is *[binomial['n#{n}p#{p}'][_]]],
                label: 'Binomial',
                bars: {show:true, barWidth:0},
                points: {show:true}
              },
              {
                data: seq[is *[normal['n#{n}p#{p}'][_]]],
                label: 'Normal',
                lines: {show:true}
              },
              {
                data: seq[is *[sn['n#{n}p#{p}'][_]]],
                label: 'Skew-normal',
                lines: {show:true}
              }
            ];
            var options = {
              xaxis: {
              },
              yaxis: {
              }
            };

            var name = 'comparison-n#{n}p#{p}';
            $('body').append(html[
              div.box(
                div.caption('Binomial (n = #{n}, p = #{p.replace("0", "0.")})'),
                div.plot /attr('id', name) /css({width:800, height:300}),
                div.xlabel('X'),
                div.ylabel('P(X)')
              )
            ]);
            $.plot($('##{name}'), series, options);
          }
        }
      }));

      /*
      $(caterwaul.clone('std seq')(function () {
        var ns = [25];
        var ps = [1, 2, 3];
        var options = {
          xaxis: {
            min: -10
          }
        };
        seq[~ns *!~n[~ps *!p[
          let[key = 'n#{n}p0#{p}',
              colors = ['#fc0', '#ff0', '#7c0'],
              labels = ['N = #{n}, P = #{p}', 'Normal', 'Skew-normal'],
              series(data, label, color, bars) = {
                data: data,
                label: label,
                color: color,
                bars: bars ? {show:true, barWidth:0} : false,
                lines: {show:!bars},
                points: {show:bars}
              }]

          [$('body').append('<div id="comparison-n#{n}p0#{p}" style="width:800px; height:300px"></div>'),
           $.plot($('#comparison-n#{n}p0#{p}'),
             seq[~[binomial, sn, normal] *[
               series(_[key], labels[_i], colors[_i], _i === 0)]],
             options)
           ]]]];
      }));
      */
    </script>
  </head>
  <body></body>
</html>
